var n={268(n,e,t){t.r(e),t.d(e,{default:()=>s});var a=t(492),o=t.n(a),r=t(748),i=t.n(r)()(o());i.push([n.id,'@import url(https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;500;700&display=swap);']),i.push([n.id,'.director-return-button[data-v-1af83d60]{display:block;width:120px;margin:20px auto 10px auto;padding:8px 12px;background-color:rgba(40,40,40,0.8);color:#e0e0e0;border:1px solid #444;border-radius:4px;cursor:pointer;text-align:center;font-family:\'Noto Serif SC\',serif;transition:background-color 0.3s;text-decoration:none}.director-return-button[data-v-1af83d60]:hover{background-color:rgba(60,60,60,0.9)}\n','',{version:3,sources:['webpack://./src/ARK_STATUSBAR/components/ReturnButton.vue'],names:[],mappings:'AAsCA,yCACE,aAAc,CACd,WAAY,CACZ,0BAA2B,CAC3B,gBAAiB,CACjB,mCAAuC,CACvC,aAAc,CACd,qBAAsB,CACtB,iBAAkB,CAClB,cAAe,CACf,iBAAkB,CAClB,iCAAmC,CACnC,gCAAiC,CACjC,oBACF,CAEA,+CACE,mCACF',sourcesContent:['<template>\n  <a class="director-return-button" @click="handleReturn"> 返回开局 </a>\n</template>\n\n<script setup lang="ts">\nconst handleReturn = async () => {\n  try {\n    if (typeof SillyTavern === \'undefined\' || !SillyTavern.chat) {\n      throw new Error(\'SillyTavern environment not found.\');\n    }\n\n    const firstMessage = SillyTavern.chat[0];\n    const targetSwipeId = 0;\n\n    // Verify swipe 0 exists\n    if (!firstMessage || !firstMessage.swipes || typeof firstMessage.swipes[targetSwipeId] !== \'string\') {\n      throw new Error(`Startup swipe #${targetSwipeId} not found.`);\n    }\n\n    console.info(\'[ReturnButton] Returning to Startup (Swipe #0)...\');\n\n    // Update message content\n    firstMessage.swipe_id = targetSwipeId;\n    firstMessage.mes = firstMessage.swipes[targetSwipeId];\n\n    // Save and Reload\n    await SillyTavern.saveChat();\n    await SillyTavern.reloadCurrentChat();\n  } catch (error) {\n    console.error(\'[ReturnButton] Failed to return to startup:\', error);\n    toastr.error(\'返回开局失败: \' + (error as Error).message);\n  }\n};\n<\/script>\n\n<style scoped>\n@import url(\'https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;500;700&display=swap\');\n\n.director-return-button {\n  display: block;\n  width: 120px;\n  margin: 20px auto 10px auto;\n  padding: 8px 12px;\n  background-color: rgba(40, 40, 40, 0.8);\n  color: #e0e0e0;\n  border: 1px solid #444;\n  border-radius: 4px;\n  cursor: pointer;\n  text-align: center;\n  font-family: \'Noto Serif SC\', serif;\n  transition: background-color 0.3s;\n  text-decoration: none; /* In case global styles affect <a> */\n}\n\n.director-return-button:hover {\n  background-color: rgba(60, 60, 60, 0.9);\n}\n</style>\n'],sourceRoot:''}]);const s=i},424(n,e,t){function a(n,e){for(var t=[],a={},o=0;o<e.length;o++){var r=e[o],i=r[0],s={id:n+':'+o,css:r[1],media:r[2],sourceMap:r[3]};a[i]?a[i].parts.push(s):t.push(a[i]={id:i,parts:[s]})}return t}t.d(e,{A:()=>g});var o='undefined'!=typeof document;if('undefined'!=typeof DEBUG&&DEBUG&&!o)throw new Error('vue-style-loader cannot be used in a non-browser environment. Use { target: \'node\' } in your Webpack config to indicate a server-rendering environment.');var r={},i=o&&(document.head||document.getElementsByTagName('head')[0]),s=null,l=0,d=!1,c=function(){},A=null,p='data-vue-ssr-id',C='undefined'!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function g(n,e,t,o){d=t,A=o||{};var i=a(n,e);return f(i),function(e){for(var t=[],o=0;o<i.length;o++){var s=i[o];(l=r[s.id]).refs--,t.push(l)}e?f(i=a(n,e)):i=[];for(o=0;o<t.length;o++){var l;if(0===(l=t[o]).refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete r[l.id]}}}}function f(n){for(var e=0;e<n.length;e++){var t=n[e],a=r[t.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](t.parts[o]);for(;o<t.parts.length;o++)a.parts.push(b(t.parts[o]));a.parts.length>t.parts.length&&(a.parts.length=t.parts.length)}else{var i=[];for(o=0;o<t.parts.length;o++)i.push(b(t.parts[o]));r[t.id]={id:t.id,refs:1,parts:i}}}}function u(){var n=document.createElement('style');return n.type='text/css',i.appendChild(n),n}function b(n){var e,t,a=document.querySelector('style['+p+'~="'+n.id+'"]');if(a){if(d)return c;a.parentNode.removeChild(a)}if(C){var o=l++;a=s||(s=u()),e=h.bind(null,a,o,!1),t=h.bind(null,a,o,!0)}else a=u(),e=B.bind(null,a),t=function(){a.parentNode.removeChild(a)};return e(n),function(a){if(a){if(a.css===n.css&&a.media===n.media&&a.sourceMap===n.sourceMap)return;e(n=a)}else t()}}var v,m=(v=[],function(n,e){return v[n]=e,v.filter(Boolean).join('\n')});function h(n,e,t,a){var o=t?'':a.css;if(n.styleSheet)n.styleSheet.cssText=m(e,o);else{var r=document.createTextNode(o),i=n.childNodes;i[e]&&n.removeChild(i[e]),i.length?n.insertBefore(r,i[e]):n.appendChild(r)}}function B(n,e){var t=e.css,a=e.media,o=e.sourceMap;if(a&&n.setAttribute('media',a),A.ssrId&&n.setAttribute(p,e.id),o&&(t+='\n/*# sourceURL='+o.sources[0]+' */',t+='\n/*# sourceMappingURL=data:application/json;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+' */'),n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}},439(n,e,t){t.r(e),t.d(e,{default:()=>s});var a=t(492),o=t.n(a),r=t(748),i=t.n(r)()(o());i.push([n.id,'@import url(https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;500;700&display=swap);']),i.push([n.id,'.ark-startup-container[data-v-13ae4df6]{display:flex;justify-content:center;align-items:center;width:100%;--ui-bg:#fafafa;--ui-text-main:#1a1a1a;--ui-text-secondary:#2a2a2a;--ui-border-primary:#e8e8e8;--ui-accent:#1a1a1a;--warning-accent:#ffa726;--panel-width:300px}.ark-startup-container.dark-theme[data-v-13ae4df6]{--ui-bg:rgba(20,20,20,0.85);--ui-text-main:#e0e0e0;--ui-text-secondary:#b0b0b0;--ui-border-primary:#444;--ui-accent:#4fc3f7}.main-container[data-v-13ae4df6]{width:100%;max-width:900px;background:var(--ui-bg);backdrop-filter:blur(10px);border-radius:4px;border:1px solid var(--ui-border-primary);position:relative;overflow:hidden;transition:background-color 0.3s,border-color 0.3s;font-family:\'Noto Serif SC\',serif}.content-wrapper[data-v-13ae4df6]{padding:50px 40px;position:relative;z-index:3}.header-section[data-v-13ae4df6]{text-align:center;margin-bottom:50px;padding-bottom:30px;border-bottom:1px solid var(--ui-border-primary)}.arknights-logo[data-v-13ae4df6]{width:300px;height:auto;transition:filter 0.3s}.dark-theme .arknights-logo[data-v-13ae4df6]{filter:invert(1) brightness(0.8)}.author-info[data-v-13ae4df6]{font-size:1em;color:var(--ui-text-secondary);margin-bottom:5px;font-weight:300}.copyright-notice[data-v-13ae4df6],.usage-instructions[data-v-13ae4df6],.warning-box[data-v-13ae4df6]{background:rgba(128,128,128,0.1);padding:20px;margin:30px 0;border-left:3px solid var(--ui-accent);font-size:0.9em;line-height:1.8;color:var(--ui-text-secondary)}.usage-instructions[data-v-13ae4df6]{background:rgba(255,167,38,0.1);margin:20px 0 30px 0;border-left:3px solid var(--warning-accent)}.warning-box[data-v-13ae4df6]{background-color:rgba(255,165,0,0.1);border-left-color:var(--warning-accent);margin-bottom:20px;border:1px solid rgba(255,165,0,0.5);border-radius:4px}.section-title[data-v-13ae4df6]{font-size:1.5em;font-weight:500;color:var(--ui-text-main);margin:40px 0 20px 0;padding-bottom:10px;border-bottom:2px solid var(--ui-accent);letter-spacing:2px}.intro-desc[data-v-13ae4df6]{font-size:1em;color:var(--ui-text-secondary);line-height:1.8;margin-bottom:30px}.opening-grid[data-v-13ae4df6]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-top:30px}.opening-card[data-v-13ae4df6]{background:transparent;border:1px solid var(--ui-border-primary);padding:25px;cursor:pointer;transition:all 0.3s ease;position:relative}.opening-card[data-v-13ae4df6]:hover{transform:translateY(-3px);border-color:var(--ui-accent);background-color:rgba(128,128,128,0.05)}.opening-title[data-v-13ae4df6]{font-size:1.2em;font-weight:500;color:var(--ui-text-main)}.opening-info[data-v-13ae4df6]{font-size:0.85em;color:var(--ui-text-secondary);margin-top:4px;opacity:0.8}.info-label[data-v-13ae4df6]{font-weight:bold;opacity:0.7}.settings-panel[data-v-13ae4df6]{position:absolute;top:0;right:calc(var(--panel-width) * -1);width:var(--panel-width);height:100%;background-color:var(--ui-bg);backdrop-filter:blur(12px);border-left:1px solid var(--ui-border-primary);z-index:1000;padding:20px;transition:right 0.4s cubic-bezier(0.25,0.8,0.25,1);box-sizing:border-box}.settings-panel.is-open[data-v-13ae4df6]{right:0}.settings-overlay[data-v-13ae4df6]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.5);z-index:999;backdrop-filter:blur(2px)}.settings-tab[data-v-13ae4df6]{position:absolute;top:20px;right:0px;width:50px;height:50px;background-color:var(--ui-bg);border:1px solid var(--ui-border-primary);border-right:none;border-top-left-radius:6px;border-bottom-left-radius:6px;cursor:pointer;z-index:1001;display:flex;justify-content:center;align-items:center;color:var(--ui-text-secondary);transition:right 0.4s cubic-bezier(0.25,0.8,0.25,1)}.settings-tab.is-open[data-v-13ae4df6]{right:var(--panel-width)}.settings-divider[data-v-13ae4df6]{height:1px;background-color:var(--ui-border-primary);margin:20px 0}.theme-buttons-container[data-v-13ae4df6]{display:flex;flex-direction:column;gap:10px;margin-top:15px}.theme-button[data-v-13ae4df6]{width:100%;height:50px;border-radius:4px;cursor:pointer;border:2px solid var(--ui-border-primary);position:relative;display:flex;align-items:center;justify-content:center}.theme-button.light[data-v-13ae4df6]{background-color:#fafafa;color:#1a1a1a}.theme-button.dark[data-v-13ae4df6]{background-color:#2a2a2a;color:#e0e0e0}.theme-button.active[data-v-13ae4df6]{border-color:var(--ui-accent)}.theme-button[data-v-13ae4df6]{padding:5px}.theme-button span[data-v-13ae4df6]{position:absolute;bottom:5px;right:10px;font-size:0.8em;font-weight:bold}.setting-item[data-v-13ae4df6]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}h3[data-v-13ae4df6]{color:var(--ui-text-main);font-weight:500;font-size:1.2em}.wb-status-display[data-v-13ae4df6]{padding:15px;margin-bottom:20px;background:rgba(0,0,0,0.05);border-left:4px solid #999;position:relative;overflow:hidden}.wb-status-display .status-label[data-v-13ae4df6]{font-size:0.7em;letter-spacing:2px;color:var(--ui-text-secondary);margin-bottom:5px}.wb-status-display .status-value[data-v-13ae4df6]{font-size:1.2em;font-weight:bold;letter-spacing:1px}.wb-status-display .status-decor[data-v-13ae4df6]{position:absolute;top:0;right:0;width:20px;height:20px;background:linear-gradient(45deg,transparent 50%,rgba(255,255,255,0.1) 50%)}.status-green[data-v-13ae4df6]{border-left-color:#4caf50;color:#4caf50;background:rgba(76,175,80,0.05)}.status-blue[data-v-13ae4df6]{border-left-color:#2196f3;color:#2196f3;background:rgba(33,150,243,0.05)}.status-orange[data-v-13ae4df6]{border-left-color:#ff9800;color:#ff9800;background:rgba(255,152,0,0.05)}.wb-actions[data-v-13ae4df6]{display:flex;flex-direction:column;gap:15px;margin-bottom:20px}.ark-btn[data-v-13ae4df6]{position:relative;height:48px;display:flex;align-items:center;justify-content:center;cursor:pointer;border:1px solid var(--ui-border-primary);background:var(--ui-bg);transition:all 0.2s ease;overflow:hidden}.ark-btn .btn-content[data-v-13ae4df6]{display:flex;align-items:center;gap:10px;z-index:2;transition:all 0.2s}.ark-btn .btn-text[data-v-13ae4df6]{font-weight:bold;letter-spacing:1px;text-transform:uppercase;font-size:0.9em}.ark-btn.warning[data-v-13ae4df6]{border-color:#ff9800;color:#ff9800}.ark-btn.warning[data-v-13ae4df6]:hover{background:#ff9800;color:#fff}.ark-btn.danger[data-v-13ae4df6]{border-color:#f44336;color:#f44336}.ark-btn.danger[data-v-13ae4df6]:hover{background:#f44336;color:#fff}.ark-btn[data-v-13ae4df6]::after{content:\'\';position:absolute;top:0;right:0;width:0;height:0;border-style:solid;border-width:0 10px 10px 0;border-color:transparent currentColor transparent transparent;opacity:0.5}.ark-btn[data-v-13ae4df6]:active{transform:scale(0.98)}@media (max-width:768px){.ark-startup-container[data-v-13ae4df6]{--panel-width:210px}.settings-panel[data-v-13ae4df6]{padding:12px}.wb-status-display[data-v-13ae4df6]{padding:10px}.wb-status-display .status-value[data-v-13ae4df6]{font-size:1em}.ark-btn .btn-text[data-v-13ae4df6]{font-size:0.8em}.content-wrapper[data-v-13ae4df6]{padding:30px 15px}.arknights-logo[data-v-13ae4df6]{width:80%;max-width:300px}.opening-grid[data-v-13ae4df6]{grid-template-columns:1fr}.ark-btn[data-v-13ae4df6]{height:auto;min-height:48px;padding:10px}.ark-btn .btn-content[data-v-13ae4df6]{flex-wrap:wrap;justify-content:center;text-align:center}}\n','',{version:3,sources:['webpack://./src/ARK_STATUSBAR/components/StartupNavigator.vue'],names:[],mappings:'AAuQA,wCACE,YAAa,CACb,sBAAuB,CACvB,kBAAmB,CACnB,UAAW,CACX,eAAgB,CAChB,sBAAuB,CACvB,2BAA4B,CAC5B,2BAA4B,CAC5B,mBAAoB,CACpB,wBAAyB,CACzB,mBACF,CAEA,mDACE,2BAA+B,CAC/B,sBAAuB,CACvB,2BAA4B,CAC5B,wBAAyB,CACzB,mBACF,CAEA,iCACE,UAAW,CACX,eAAgB,CAChB,uBAAwB,CACxB,0BAA2B,CAC3B,iBAAkB,CAClB,yCAA0C,CAC1C,iBAAkB,CAClB,eAAgB,CAChB,kDAEmB,CACnB,iCACF,CAEA,kCACE,iBAAkB,CAClB,iBAAkB,CAClB,SACF,CAEA,iCACE,iBAAkB,CAClB,kBAAmB,CACnB,mBAAoB,CACpB,gDACF,CAEA,iCACE,WAAY,CACZ,WAAY,CACZ,sBACF,CAEA,6CACE,gCACF,CAEA,8BACE,aAAc,CACd,8BAA+B,CAC/B,iBAAkB,CAClB,eACF,CAEA,sGAGE,gCAAoC,CACpC,YAAa,CACb,aAAc,CACd,sCAAuC,CACvC,eAAgB,CAChB,eAAgB,CAChB,8BACF,CAEA,qCACE,+BAAmC,CACnC,oBAAqB,CACrB,2CACF,CAEA,8BACE,oCAAwC,CACxC,uCAAwC,CACxC,kBAAmB,CACnB,oCAAwC,CACxC,iBACF,CAEA,gCACE,eAAgB,CAChB,eAAgB,CAChB,yBAA0B,CAC1B,oBAAqB,CACrB,mBAAoB,CACpB,wCAAyC,CACzC,kBACF,CAEA,6BACE,aAAc,CACd,8BAA+B,CAC/B,eAAgB,CAChB,kBACF,CAEA,+BACE,YAAa,CACb,wDAA2D,CAC3D,QAAS,CACT,eACF,CAEA,+BACE,sBAAuB,CACvB,yCAA0C,CAC1C,YAAa,CACb,cAAe,CACf,wBAAyB,CACzB,iBACF,CAEA,qCACE,0BAA2B,CAC3B,6BAA8B,CAC9B,uCACF,CAEA,gCACE,eAAgB,CAChB,eAAgB,CAChB,yBACF,CAEA,+BACE,gBAAiB,CACjB,8BAA+B,CAC/B,cAAe,CACf,WACF,CAEA,6BACE,gBAAiB,CACjB,WACF,CAGA,iCACE,iBAAkB,CAClB,KAAM,CACN,mCAAoC,CACpC,wBAAyB,CACzB,WAAY,CACZ,6BAA8B,CAC9B,0BAA2B,CAC3B,8CAA+C,CAC/C,YAAa,CACb,YAAa,CACb,mDAAuD,CACvD,qBACF,CAEA,yCACE,OACF,CAGA,mCACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,UAAW,CACX,WAAY,CACZ,gCAAoC,CACpC,WAAY,CACZ,yBACF,CAEA,+BACE,iBAAkB,CAClB,QAAS,CACT,SAAU,CACV,UAAW,CACX,WAAY,CACZ,6BAA8B,CAC9B,yCAA0C,CAC1C,iBAAkB,CAClB,0BAA2B,CAC3B,6BAA8B,CAC9B,cAAe,CACf,YAAa,CACb,YAAa,CACb,sBAAuB,CACvB,kBAAmB,CACnB,8BAA+B,CAC/B,mDACF,CAEA,uCACE,wBACF,CAEA,mCACE,UAAW,CACX,yCAA0C,CAC1C,aACF,CAEA,0CACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,eACF,CAEA,+BACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,cAAe,CACf,yCAA0C,CAC1C,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,sBACF,CAEA,qCACE,wBAAyB,CACzB,aACF,CACA,oCACE,wBAAyB,CACzB,aACF,CACA,sCACE,6BACF,CAEA,+BACE,WACF,CAEA,oCACE,iBAAkB,CAClB,UAAW,CACX,UAAW,CACX,eAAgB,CAChB,gBACF,CAEA,+BACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,kBACF,CAEA,oBACE,yBAA0B,CAC1B,eAAgB,CAChB,eACF,CAKA,oCACE,YAAa,CACb,kBAAmB,CACnB,2BAA+B,CAC/B,0BAA2B,CAC3B,iBAAkB,CAClB,eACF,CAEA,kDACE,eAAgB,CAChB,kBAAmB,CACnB,8BAA+B,CAC/B,iBACF,CAEA,kDACE,eAAgB,CAChB,gBAAiB,CACjB,kBACF,CAEA,kDACE,iBAAkB,CAClB,KAAM,CACN,OAAQ,CACR,UAAW,CACX,WAAY,CACZ,2EACF,CAEA,+BACE,yBAA0B,CAC1B,aAAc,CACd,+BACF,CACA,8BACE,yBAA0B,CAC1B,aAAc,CACd,gCACF,CACA,gCACE,yBAA0B,CAC1B,aAAc,CACd,+BACF,CAGA,6BACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,kBACF,CAEA,0BACE,iBAAkB,CAClB,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,cAAe,CACf,yCAA0C,CAC1C,uBAAwB,CACxB,wBAAyB,CACzB,eACF,CAEA,uCACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,SAAU,CACV,mBACF,CAEA,oCACE,gBAAiB,CACjB,kBAAmB,CACnB,wBAAyB,CACzB,eACF,CAGA,kCACE,oBAAqB,CACrB,aACF,CACA,wCACE,kBAAmB,CACnB,UACF,CAGA,iCACE,oBAAqB,CACrB,aACF,CACA,uCACE,kBAAmB,CACnB,UACF,CAGA,iCACE,UAAW,CACX,iBAAkB,CAClB,KAAM,CACN,OAAQ,CACR,OAAQ,CACR,QAAS,CACT,kBAAmB,CACnB,0BAA2B,CAC3B,6DAA8D,CAC9D,WACF,CAEA,iCACE,qBACF,CAGA,yBACE,wCAME,mBACF,CAGA,iCACE,YACF,CAEA,oCACE,YACF,CAGA,kDACE,aACF,CAEA,oCACE,eACF,CAGA,kCACE,iBACF,CAEA,iCACE,SAAU,CACV,eACF,CAEA,+BACE,yBACF,CAGA,0BACE,WAAY,CACZ,eAAgB,CAChB,YACF,CAEA,uCACE,cAAe,CACf,sBAAuB,CACvB,iBACF,CACF',sourcesContent:['<template>\n  <div class="ark-startup-container" :class="{ \'dark-theme\': theme === \'dark\' }">\n    <div class="main-container">\n      <div class="content-wrapper">\n        \x3c!-- Header Section --\x3e\n        <div class="header-section">\n          <div class="arknights-logo-container">\n            <img :src="ASSETS.LOGO_URL" alt="Arknights Logo" class="arknights-logo" />\n          </div>\n          <p class="author-info">初版作者：打不准的豌豆射手 | v版作者：F.o.x.i.o</p>\n          <p class="author-info">UI重构：ARK_STATUSBAR Project</p>\n        </div>\n\n        <div class="copyright-notice">\n          <strong>版权声明</strong><br />\n          本卡完全免费，永远禁止商业化行为，如果您是购买获得，请立即退款并向购买平台举报贩卖者，维护创作者和您自身的权益。\n        </div>\n\n        <div class="usage-instructions">\n          <strong>使用说明</strong><br />\n          请第一次使用本角色卡的用户，务必前往最后一个开局阅读<strong style="color: var(--warning-accent)"\n            >“狐の言（在首次游玩前请一定要看！）”</strong\n          >。<br />\n          若需管理单字干员或重置世界书状态，请点击右下角按钮打开侧边栏进行操作。\n        </div>\n\n        <div class="section-title">◆ 简介</div>\n        <p class="intro-desc">\n          从先史文明的终焉开始，到萨卡兹的第一位魔王，再到移动城市的拔地而起……<br />\n          如今的泰拉已经历经许多，源石将诅咒与馈赠印刻于这片大地，列国的城邦永无止境地在天灾轨迹中迁徙，感染者的悲鸣与帝国的号角于风雪中交织，仇恨浸染大地，而希望亦如天光。<br />\n          现在，你来到于此。<br />\n          你将作何抉择？你将行向何方？<br />\n          你是……谁？\n        </p>\n\n        \x3c!-- Scenarios Grid --\x3e\n        <div class="section-title">◆ 点击—开启故事</div>\n        <div class="opening-section">\n          <div class="opening-grid">\n            <div\n              v-for="scenario in scenarios"\n              :key="scenario.swipeId"\n              class="opening-card"\n              @click="handleScenarioClick(scenario)"\n            >\n              <div class="opening-title">{{ scenario.title }}</div>\n\n              \x3c!-- Decorational Info --\x3e\n              <div class="opening-info" v-if="scenario.linkedWorldInfo && scenario.linkedWorldInfo.length > 0">\n                <span class="info-label">开启:</span> {{ scenario.linkedWorldInfo.slice(0, 3).join(\', \')\n                }}{{ scenario.linkedWorldInfo.length > 3 ? \'...\' : \'\' }}\n              </div>\n              <div class="opening-info" v-if="scenario.disabledWorldInfo && scenario.disabledWorldInfo.length > 0">\n                <span class="info-label">关闭:</span> {{ scenario.disabledWorldInfo.slice(0, 3).join(\', \')\n                }}{{ scenario.disabledWorldInfo.length > 3 ? \'...\' : \'\' }}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- Settings Toggle --\x3e\n      <div class="settings-tab" :class="{ \'is-open\': isSettingsOpen }" @click="toggleSettings">\n        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor">\n          <path d="M0 0h24v24H0V0z" fill="none" />\n          <path\n            d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12-.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"\n          />\n        </svg>\n      </div>\n\n      \x3c!-- Settings Overlay (Mobile Backdrop) --\x3e\n      <div class="settings-overlay" v-if="isSettingsOpen" @click="isSettingsOpen = false"></div>\n\n      \x3c!-- Settings Panel --\x3e\n      <div class="settings-panel" :class="{ \'is-open\': isSettingsOpen }">\n        <h3>世界书控制</h3>\n\n        <div class="wb-status-display" :class="wbStatusClass">\n          <div class="status-label">SYSTEM STATUS</div>\n          <div class="status-value">{{ wbStatusText }}</div>\n          <div class="status-decor"></div>\n        </div>\n\n        <div class="wb-actions">\n          <div class="ark-btn warning" @click="handleCloseSingleChar">\n            <div class="btn-content">\n              <span class="btn-icon">⚡</span>\n              <span class="btn-text">屏蔽单字干员</span>\n            </div>\n            <div class="btn-decor"></div>\n          </div>\n          <div class="ark-btn danger" @click="handleRestoreWorldbook">\n            <div class="btn-content">\n              <span class="btn-icon">↺</span>\n              <span class="btn-text">还原世界书</span>\n            </div>\n            <div class="btn-decor"></div>\n          </div>\n        </div>\n\n        <div id="wb-control-hint" class="warning-box">\n          <strong style="color: orange">[!] 世界书管理提示</strong>\n          <p style="font-size: 0.85em; margin-top: 5px; line-height: 1.6">\n            本面板会智能识别并管理当前角色的世界书状态。\n          </p>\n          <p style="font-size: 0.85em; margin-top: 5px; line-height: 1.6">\n            若您手动修改了世界书（如自行开启了某些条目），状态将显示为<strong style="color: #ff9800">“已修改”</strong\n            >。此时切换开局可能会触发冲突警告，请按需选择继续或重置。\n          </p>\n        </div>\n\n        <div class="settings-divider"></div>\n\n        <h3>页面主题</h3>\n        <div class="theme-buttons-container">\n          <div class="theme-button light" :class="{ active: theme === \'light\' }" @click="setTheme(\'light\')">\n            <span>默认</span>\n          </div>\n          <div class="theme-button dark" :class="{ active: theme === \'dark\' }" @click="setTheme(\'dark\')">\n            <span>夜间</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport { onMounted, ref } from \'vue\';\nimport { ASSETS } from \'../config/assets\';\nimport { STARTUP_SCENARIOS, type Scenario } from \'../config/scenarios\';\nimport { WorldbookManager, type WorldbookStatus } from \'../logic/worldbook_manager\';\n\n// Constants\nconst STORAGE_KEY_THEME = \'ark_statusbar_theme\';\n\n// State\nconst scenarios = ref(STARTUP_SCENARIOS);\nconst theme = ref<\'light\' | \'dark\'>(\'dark\');\nconst isSettingsOpen = ref(false);\nconst wbStatus = ref<WorldbookStatus>(\'original\');\n\n// Computed\nconst wbStatusText = computed(() => {\n  switch (wbStatus.value) {\n    case \'original\':\n      return \'初始状态\';\n    case \'single_char_closed\':\n      return \'单字屏蔽\';\n    case \'modified\':\n      return \'非标修改\';\n    default:\n      return \'未知状态\';\n  }\n});\n\nconst wbStatusClass = computed(() => {\n  switch (wbStatus.value) {\n    case \'original\':\n      return \'status-green\';\n    case \'single_char_closed\':\n      return \'status-blue\';\n    case \'modified\':\n      return \'status-orange\';\n    default:\n      return \'status-gray\';\n  }\n});\n\n// Methods\nconst toggleSettings = () => {\n  isSettingsOpen.value = !isSettingsOpen.value;\n  // Refresh status when opening settings\n  if (isSettingsOpen.value) {\n    checkWbStatus();\n  }\n};\n\nconst setTheme = (newTheme: \'light\' | \'dark\') => {\n  theme.value = newTheme;\n  localStorage.setItem(STORAGE_KEY_THEME, newTheme);\n};\n\nconst checkWbStatus = async () => {\n  wbStatus.value = await WorldbookManager.getWorldbookStatus();\n};\n\nconst handleCloseSingleChar = async () => {\n  await WorldbookManager.closeSingleCharEntries();\n  await checkWbStatus();\n};\n\nconst handleRestoreWorldbook = async () => {\n  if (confirm(\'确定要将世界书重置为初始状态吗？这将丢失所有自定义修改。\')) {\n    await WorldbookManager.resetToBaseline();\n    await checkWbStatus();\n  }\n};\n\n// Initialize\nonMounted(() => {\n  const savedTheme = localStorage.getItem(STORAGE_KEY_THEME);\n  if (savedTheme === \'light\' || savedTheme === \'dark\') {\n    theme.value = savedTheme;\n  }\n  checkWbStatus();\n});\n\nconst handleScenarioClick = async (scenario: Scenario) => {\n  try {\n    // 1. Apply Worldbook Logic\n    try {\n      await WorldbookManager.applyScenario(scenario.swipeId);\n    } catch (e) {\n      if ((e as Error).message === \'STATUS_MODIFIED\') {\n        if (\n          confirm(\n            \'检测到世界书包含非标准修改（可能是您手动开启了某些条目）。\\n直接跳转开局可能会在当前基础上叠加设置，导致状态混乱。\\n\\n是否继续？\',\n          )\n        ) {\n          await WorldbookManager.applyScenario(scenario.swipeId, true); // Force apply\n        } else {\n          return; // User cancelled\n        }\n      } else {\n        throw e;\n      }\n    }\n\n    // Update status after apply\n    await checkWbStatus();\n\n    // 2. Switch Swipe (Legacy Logic)\n    // We assume SillyTavern global is available\n    if (typeof SillyTavern === \'undefined\' || !SillyTavern.chat) {\n      throw new Error(\'SillyTavern environment not found.\');\n    }\n\n    const firstMessage = SillyTavern.chat[0];\n    if (!firstMessage || !firstMessage.swipes || typeof firstMessage.swipes[scenario.swipeId] !== \'string\') {\n      throw new Error(`Swipe #${scenario.swipeId} content not found.`);\n    }\n\n    console.info(`[Startup] Switching to Swipe #${scenario.swipeId}`);\n\n    // Update the message content to the selected swipe\n    firstMessage.swipe_id = scenario.swipeId;\n    firstMessage.mes = firstMessage.swipes[scenario.swipeId];\n\n    // Save and Reload\n    await SillyTavern.saveChat();\n    await SillyTavern.reloadCurrentChat();\n  } catch (error) {\n    console.error(\'[Startup] Failed to apply scenario:\', error);\n    toastr.error(\'切换开局失败: \' + (error as Error).message);\n  }\n};\n<\/script>\n\n<style scoped>\n@import url(\'https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;500;700&display=swap\');\n\n.ark-startup-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  --ui-bg: #fafafa;\n  --ui-text-main: #1a1a1a;\n  --ui-text-secondary: #2a2a2a;\n  --ui-border-primary: #e8e8e8;\n  --ui-accent: #1a1a1a;\n  --warning-accent: #ffa726;\n  --panel-width: 300px;\n}\n\n.ark-startup-container.dark-theme {\n  --ui-bg: rgba(20, 20, 20, 0.85);\n  --ui-text-main: #e0e0e0;\n  --ui-text-secondary: #b0b0b0;\n  --ui-border-primary: #444;\n  --ui-accent: #4fc3f7;\n}\n\n.main-container {\n  width: 100%;\n  max-width: 900px;\n  background: var(--ui-bg);\n  backdrop-filter: blur(10px);\n  border-radius: 4px;\n  border: 1px solid var(--ui-border-primary);\n  position: relative;\n  overflow: hidden;\n  transition:\n    background-color 0.3s,\n    border-color 0.3s;\n  font-family: \'Noto Serif SC\', serif;\n}\n\n.content-wrapper {\n  padding: 50px 40px;\n  position: relative;\n  z-index: 3;\n}\n\n.header-section {\n  text-align: center;\n  margin-bottom: 50px;\n  padding-bottom: 30px;\n  border-bottom: 1px solid var(--ui-border-primary);\n}\n\n.arknights-logo {\n  width: 300px;\n  height: auto;\n  transition: filter 0.3s;\n}\n\n.dark-theme .arknights-logo {\n  filter: invert(1) brightness(0.8);\n}\n\n.author-info {\n  font-size: 1em;\n  color: var(--ui-text-secondary);\n  margin-bottom: 5px;\n  font-weight: 300;\n}\n\n.copyright-notice,\n.usage-instructions,\n.warning-box {\n  background: rgba(128, 128, 128, 0.1);\n  padding: 20px;\n  margin: 30px 0;\n  border-left: 3px solid var(--ui-accent);\n  font-size: 0.9em;\n  line-height: 1.8;\n  color: var(--ui-text-secondary);\n}\n\n.usage-instructions {\n  background: rgba(255, 167, 38, 0.1);\n  margin: 20px 0 30px 0;\n  border-left: 3px solid var(--warning-accent);\n}\n\n.warning-box {\n  background-color: rgba(255, 165, 0, 0.1);\n  border-left-color: var(--warning-accent);\n  margin-bottom: 20px;\n  border: 1px solid rgba(255, 165, 0, 0.5);\n  border-radius: 4px;\n}\n\n.section-title {\n  font-size: 1.5em;\n  font-weight: 500;\n  color: var(--ui-text-main);\n  margin: 40px 0 20px 0;\n  padding-bottom: 10px;\n  border-bottom: 2px solid var(--ui-accent);\n  letter-spacing: 2px;\n}\n\n.intro-desc {\n  font-size: 1em;\n  color: var(--ui-text-secondary);\n  line-height: 1.8;\n  margin-bottom: 30px;\n}\n\n.opening-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 20px;\n  margin-top: 30px;\n}\n\n.opening-card {\n  background: transparent;\n  border: 1px solid var(--ui-border-primary);\n  padding: 25px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n}\n\n.opening-card:hover {\n  transform: translateY(-3px);\n  border-color: var(--ui-accent);\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n.opening-title {\n  font-size: 1.2em;\n  font-weight: 500;\n  color: var(--ui-text-main);\n}\n\n.opening-info {\n  font-size: 0.85em;\n  color: var(--ui-text-secondary);\n  margin-top: 4px;\n  opacity: 0.8;\n}\n\n.info-label {\n  font-weight: bold;\n  opacity: 0.7;\n}\n\n/* Settings Panel */\n.settings-panel {\n  position: absolute;\n  top: 0;\n  right: calc(var(--panel-width) * -1);\n  width: var(--panel-width);\n  height: 100%;\n  background-color: var(--ui-bg);\n  backdrop-filter: blur(12px);\n  border-left: 1px solid var(--ui-border-primary);\n  z-index: 1000;\n  padding: 20px;\n  transition: right 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);\n  box-sizing: border-box; /* Prevent padding from adding to width */\n}\n\n.settings-panel.is-open {\n  right: 0;\n}\n\n/* Overlay Backdrop */\n.settings-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 999; /* Below panel (1000), above content */\n  backdrop-filter: blur(2px);\n}\n\n.settings-tab {\n  position: absolute;\n  top: 20px;\n  right: 0px;\n  width: 50px;\n  height: 50px;\n  background-color: var(--ui-bg);\n  border: 1px solid var(--ui-border-primary);\n  border-right: none;\n  border-top-left-radius: 6px;\n  border-bottom-left-radius: 6px;\n  cursor: pointer;\n  z-index: 1001;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: var(--ui-text-secondary);\n  transition: right 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);\n}\n\n.settings-tab.is-open {\n  right: var(--panel-width);\n}\n\n.settings-divider {\n  height: 1px;\n  background-color: var(--ui-border-primary);\n  margin: 20px 0;\n}\n\n.theme-buttons-container {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  margin-top: 15px;\n}\n\n.theme-button {\n  width: 100%;\n  height: 50px;\n  border-radius: 4px;\n  cursor: pointer;\n  border: 2px solid var(--ui-border-primary);\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.theme-button.light {\n  background-color: #fafafa;\n  color: #1a1a1a;\n}\n.theme-button.dark {\n  background-color: #2a2a2a;\n  color: #e0e0e0;\n}\n.theme-button.active {\n  border-color: var(--ui-accent);\n}\n\n.theme-button {\n  padding: 5px;\n}\n\n.theme-button span {\n  position: absolute;\n  bottom: 5px;\n  right: 10px;\n  font-size: 0.8em;\n  font-weight: bold;\n}\n\n.setting-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\nh3 {\n  color: var(--ui-text-main);\n  font-weight: 500;\n  font-size: 1.2em;\n}\n\n/* --- Arknights Style UI --- */\n\n/* Status Display */\n.wb-status-display {\n  padding: 15px;\n  margin-bottom: 20px;\n  background: rgba(0, 0, 0, 0.05);\n  border-left: 4px solid #999;\n  position: relative;\n  overflow: hidden;\n}\n\n.wb-status-display .status-label {\n  font-size: 0.7em;\n  letter-spacing: 2px;\n  color: var(--ui-text-secondary);\n  margin-bottom: 5px;\n}\n\n.wb-status-display .status-value {\n  font-size: 1.2em;\n  font-weight: bold;\n  letter-spacing: 1px;\n}\n\n.wb-status-display .status-decor {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 20px;\n  height: 20px;\n  background: linear-gradient(45deg, transparent 50%, rgba(255, 255, 255, 0.1) 50%);\n}\n\n.status-green {\n  border-left-color: #4caf50;\n  color: #4caf50;\n  background: rgba(76, 175, 80, 0.05);\n}\n.status-blue {\n  border-left-color: #2196f3;\n  color: #2196f3;\n  background: rgba(33, 150, 243, 0.05);\n}\n.status-orange {\n  border-left-color: #ff9800;\n  color: #ff9800;\n  background: rgba(255, 152, 0, 0.05);\n}\n\n/* Arknights Buttons */\n.wb-actions {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n  margin-bottom: 20px;\n}\n\n.ark-btn {\n  position: relative;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  border: 1px solid var(--ui-border-primary);\n  background: var(--ui-bg);\n  transition: all 0.2s ease;\n  overflow: hidden;\n}\n\n.ark-btn .btn-content {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  z-index: 2;\n  transition: all 0.2s;\n}\n\n.ark-btn .btn-text {\n  font-weight: bold;\n  letter-spacing: 1px;\n  text-transform: uppercase;\n  font-size: 0.9em;\n}\n\n/* Warning Button (Close Single Char) */\n.ark-btn.warning {\n  border-color: #ff9800;\n  color: #ff9800;\n}\n.ark-btn.warning:hover {\n  background: #ff9800;\n  color: #fff;\n}\n\n/* Danger Button (Restore) */\n.ark-btn.danger {\n  border-color: #f44336;\n  color: #f44336;\n}\n.ark-btn.danger:hover {\n  background: #f44336;\n  color: #fff;\n}\n\n/* Decor Elements */\n.ark-btn::after {\n  content: \'\';\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 0 10px 10px 0;\n  border-color: transparent currentColor transparent transparent;\n  opacity: 0.5;\n}\n\n.ark-btn:active {\n  transform: scale(0.98);\n}\n\n/* Mobile Responsive */\n@media (max-width: 768px) {\n  .ark-startup-container {\n    /*\n      Compress sidebar width to 210px (Final Polish).\n      On a 360px screen, this leaves 150px (50px button + 100px overlay),\n      providing a very comfortable interaction zone.\n    */\n    --panel-width: 210px;\n  }\n\n  /* Reduce panel internal padding to maximize space in the narrower sidebar */\n  .settings-panel {\n    padding: 12px;\n  }\n\n  .wb-status-display {\n    padding: 10px;\n  }\n\n  /* Adjust font sizes for narrower panel */\n  .wb-status-display .status-value {\n    font-size: 1em; /* Slightly smaller for 210px */\n  }\n\n  .ark-btn .btn-text {\n    font-size: 0.8em; /* Ensure text fits in 210px */\n  }\n\n  /* Main Content Adjustments */\n  .content-wrapper {\n    padding: 30px 15px; /* Reduce padding to prevent overflow */\n  }\n\n  .arknights-logo {\n    width: 80%; /* Responsive logo width */\n    max-width: 300px;\n  }\n\n  .opening-grid {\n    grid-template-columns: 1fr; /* Single column on mobile */\n  }\n\n  /* Fix button text wrapping */\n  .ark-btn {\n    height: auto;\n    min-height: 48px;\n    padding: 10px;\n  }\n\n  .ark-btn .btn-content {\n    flex-wrap: wrap;\n    justify-content: center;\n    text-align: center;\n  }\n}\n</style>\n'],sourceRoot:''}]);const s=i},448(n,e,t){var a=t(268);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[n.id,a,'']]),a.locals&&(n.exports=a.locals);(0,t(424).A)('49cd1e56',a,!1,{ssrId:!0})},492(n){n.exports=function(n){var e=n[1],t=n[3];if(!t)return e;if('function'==typeof btoa){var a=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),o='sourceMappingURL=data:application/json;charset=utf-8;base64,'.concat(a),r='/*# '.concat(o,' */');return[e].concat([r]).join('\n')}return[e].join('\n')}},502(n,e){e.A=(n,e)=>{const t=n.__vccOpts||n;for(const[n,a]of e)t[n]=a;return t}},531(n,e,t){var a=t(439);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[n.id,a,'']]),a.locals&&(n.exports=a.locals);(0,t(424).A)('138291af',a,!1,{ssrId:!0})},748(n){n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t='',a=void 0!==e[5];return e[4]&&(t+='@supports ('.concat(e[4],') {')),e[2]&&(t+='@media '.concat(e[2],' {')),a&&(t+='@layer'.concat(e[5].length>0?' '.concat(e[5]):'',' {')),t+=n(e),a&&(t+='}'),e[2]&&(t+='}'),e[4]&&(t+='}'),t}).join('')},e.i=function(n,t,a,o,r){'string'==typeof n&&(n=[[null,n,void 0]]);var i={};if(a)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var d=0;d<n.length;d++){var c=[].concat(n[d]);a&&i[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]='@layer'.concat(c[5].length>0?' '.concat(c[5]):'',' {').concat(c[1],'}')),c[5]=r),t&&(c[2]?(c[1]='@media '.concat(c[2],' {').concat(c[1],'}'),c[2]=t):c[2]=t),o&&(c[4]?(c[1]='@supports ('.concat(c[4],') {').concat(c[1],'}'),c[4]=o):c[4]=''.concat(o)),e.push(c))}},e}}},e={};function t(a){var o=e[a];if(void 0!==o)return o.exports;var r=e[a]={id:a,exports:{}};return n[a](r,r.exports,t),r.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var a in e)t.o(e,a)&&!t.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:e[a]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.r=n=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(n,'__esModule',{value:!0})};const a=Vue;const o=(0,a.defineComponent)({__name:'ReturnButton',setup(n){const e=async()=>{try{if('undefined'==typeof SillyTavern||!SillyTavern.chat)throw new Error('SillyTavern environment not found.');const n=SillyTavern.chat[0],e=0;if(!n||!n.swipes||'string'!=typeof n.swipes[e])throw new Error(`Startup swipe #${e} not found.`);console.info('[ReturnButton] Returning to Startup (Swipe #0)...'),n.swipe_id=e,n.mes=n.swipes[e],await SillyTavern.saveChat(),await SillyTavern.reloadCurrentChat()}catch(n){console.error('[ReturnButton] Failed to return to startup:',n),toastr.error('返回开局失败: '+n.message)}};return(n,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('a',{class:'director-return-button',onClick:e},' 返回开局 '))}});t(448);var r=t(502);const i=(0,r.A)(o,[['__scopeId','data-v-1af83d60']]),s={LOGO_URL:'https://storage.moegirl.org.cn/moegirl/commons/9/9e/%E6%98%8E%E6%97%A5%E6%96%B9%E8%88%9F_LOGO.png'},l=[{swipeId:1,title:'“作为博士被正常唤醒”',linkedWorldInfo:['阿米娅','罗德岛']},{swipeId:2,title:'“依旧博士，但唤醒你的是W？”',linkedWorldInfo:['W','萨卡兹','巴别塔']},{swipeId:3,title:'“关于我莫名其妙的来到泰拉并成为了两只幼龙的监护人这件事”',linkedWorldInfo:['维多利亚','爱布拉娜·都柏林','拉芙希妮·都柏林']},{swipeId:4,title:'“企鹅物流，我是来面试的，你们要干什么？！”',linkedWorldInfo:['企鹅物流','能天使','德克萨斯','空','可颂']},{swipeId:5,title:'“企鹅物流，每天都被请去喝茶的同事们真的太逊了”',linkedWorldInfo:['大帝','伊斯','企鹅物流']},{swipeId:6,title:'“燎原”',linkedWorldInfo:['塔露拉','阿丽娜','乌萨斯']},{swipeId:7,title:'“穿越了，但穿的是迷迭香”',linkedWorldInfo:['迷迭香','凯尔希','罗德岛']},{swipeId:8,title:'“终末地”',linkedWorldInfo:['佩丽卡','管理员','终末地（非游玩时请关闭）']},{swipeId:9,title:'“海嗣灭世”',linkedWorldInfo:['海嗣','海嗣灭世（非游玩时请关闭）']},{swipeId:10,title:'“你与她的终末”',linkedWorldInfo:['海嗣','你与她的终末（非游玩时请关闭）','伊莎玛拉']},{swipeId:11,title:'“罗德岛学院，18岁，事学生”',linkedWorldInfo:['罗德岛学院（非游玩时请关闭）']},{swipeId:12,title:'“罗德岛学院，24岁，事教师”',linkedWorldInfo:['罗德岛学院（非游玩时请关闭）']},{swipeId:13,title:'“加油啊，制作人”',linkedWorldInfo:['塞壬唱片MSR','尤里卡','阮薇薇','遥']},{swipeId:14,title:'“898年卡兹戴尔新任魔王，欸？我打凯尔希+三国联军？真的假的？”',linkedWorldInfo:['卡兹戴尔','萨卡兹','预见末日的贤人']},{swipeId:15,title:'“罗德岛新晋，无名小卒还是名扬天下？”',linkedWorldInfo:['罗德岛']},{swipeId:16,title:'“反常光谱”',linkedWorldInfo:['Mantra','极境']},{swipeId:17,title:'“巴别塔的恶灵”',linkedWorldInfo:['卡兹戴尔','巴别塔','特蕾西娅','凯尔希','阿米娅']},{swipeId:18,title:'“谢邀，人在13000年前，二人一猫星间漂流”',linkedWorldInfo:['普瑞赛斯','Ama-10']},{swipeId:19,title:'“你们这里谁最会构史？”',linkedWorldInfo:['妮芙','锡人']},{swipeId:20,title:'“卡西米尔一般路过游客（并非）”',linkedWorldInfo:['卡西米尔']},{swipeId:21,title:'“我的幼驯染天使”',linkedWorldInfo:['拉特兰','蕾缪乐']},{swipeId:22,title:'“莱茵生命纪实”',linkedWorldInfo:['克丽斯腾','塞雷娅','莱茵生命']},{swipeId:23,title:'“岁岁今朝”',linkedWorldInfo:['炎','朔']},{swipeId:24,title:'“泰拉万事屋”',linkedWorldInfo:['拉普兰德']},{swipeId:25,title:'“摸鱼侦探事务所”',linkedWorldInfo:['鲤氏侦探事务所','老鲤','槐琥','吽','阿']},{swipeId:26,title:'“博士救出作战第一号”',linkedWorldInfo:['阿米娅','Ace','Scout']},{swipeId:27,title:'“当佣兵何尝不算是一种搜打撤”',linkedWorldInfo:['卡兹戴尔','W','伊内丝','赫德雷']},{swipeId:28,title:'“虽然引导并未破碎，但也请您成为真龙”',linkedWorldInfo:['炎','太傅','太尉']},{swipeId:29,title:'“企鹅物流保姆这一块”',linkedWorldInfo:['能天使','德克萨斯','空','可颂','企鹅物流']},{swipeId:30,title:'“博士的日常”',linkedWorldInfo:['罗德岛']},{swipeId:31,title:'“开门，社区送温暖！”',linkedWorldInfo:['龙门']},{swipeId:32,title:'“我补药当超级烂片大王口牙”',linkedWorldInfo:['炎','年']},{swipeId:33,title:'“兄啊，你要老婆不要”',linkedWorldInfo:['老鲤']},{swipeId:34,title:'“修道院往事”',linkedWorldInfo:['拉特兰','聆音','埃莉丝','空弦','塑心']},{swipeId:35,title:'“双狼记”',linkedWorldInfo:['叙拉古','德克萨斯','拉普兰德']},{swipeId:36,title:'“漆黑钢铁的琶音”',linkedWorldInfo:['黑钢','芙兰卡','雷蛇','杰西卡']},{swipeId:37,title:'“You！”',linkedWorldInfo:['维多利亚','澄闪']},{swipeId:38,title:'“夏日、阳光、海滩！”',linkedWorldInfo:['汐斯塔','Mon3tr','特蕾西娅','凯尔希','阿米娅']},{swipeId:39,title:'“往日种种，你当真不记得了？”',linkedWorldInfo:['普瑞赛斯','博士','凯尔希','Mon3tr']},{swipeId:40,title:'“什么叫构史成真了？”',linkedWorldInfo:['罗德岛','泰拉大陆调查团','能天使','新约能天使','德克萨斯','缄默德克萨斯','斯卡蒂','浊心斯卡蒂','妮芙','构史成真（非游玩时请关闭喵）']},{swipeId:41,title:'“深海猎人，血脉相连”',linkedWorldInfo:['阿戈尔','斯卡蒂','幽灵鲨','歌蕾蒂娅','德克萨斯','乌尔比安']},{swipeId:42,title:'“匡 扶 深 池”',linkedWorldInfo:['维多利亚','深池','蔓德拉','苇草','死芒']},{swipeId:43,title:'“释放你的想象力，在这里开启属于你的故事吧！”',linkedWorldInfo:[]},{swipeId:44,title:'“狐の言（作者的话）”',linkedWorldInfo:[]}],d={备注:!0,世界观:!0,'魔王（与特蕾西娅选一开）':!1,'状态栏（基本废弃，请保持关闭）':!1,'快回（抽象，非游玩请关闭）':!1,'历史（详细历史，非必须使用时请关闭）':!1,历史大事件:!0,'干员档案（基本废弃，请保持关闭）':!1,'干员档案-思考（同干员档案）':!1,前文明:!0,泰拉:!0,人类:!0,黎博利:!0,'特别感谢版本彩蛋（豌豆写的，后由Fox进行文本优化）':!0,菲林:!0,泰拉大陆调查团:!0,'凯尔希（本格，与Ama-10、巴别塔、预见末日的贤人选一开）':!0,卡特斯:!0,鲁珀:!0,沃尔珀:!0,佩洛:!0,莱伊:!0,丰蹄:!0,墨魉:!0,卡普里尼:!0,乌萨斯:!0,风笛:!0,库兰塔:!0,埃拉菲亚:!0,札拉克:!0,阿纳缇:!0,萨科塔:!0,龙:!0,德拉克:!0,阿斯兰:!0,斐迪亚:!0,瓦伊凡:!0,萨卡兹:!0,血魔:!0,温迪戈:!0,石翼魔:!0,食腐者:!0,女妖:!0,变形者:!0,巫妖:!0,独眼巨人:!0,笞心魔:!0,'星熊（本格，与异格选一开）':!0,炎魔:!0,死魂灵:!0,白金:!0,海嗣:!0,'阿戈尔（人）':!0,依特拉:!0,邪魔:!0,曼提柯:!0,麒麟:!0,阿达克利斯:!0,萨弗拉:!0,瑞柏巴:!0,塞拉托:!0,安努拉:!0,罗德岛:!0,拉特兰:!0,卡兹戴尔:!0,炎:!0,龙门:!0,企鹅物流:!0,乌萨斯帝国:!0,整合运动:!0,维多利亚:!0,哥伦比亚:!0,黑钢国际:!0,莱茵生命:!0,叙拉古:!0,卡西米尔:!0,阿戈尔:!0,伊比利亚:!0,萨尔贡:!0,汐斯塔:!0,谢拉格:!0,喀兰贸易:!0,萨米:!0,深海教会:!0,莱塔尼亚:!0,魏彦吾:!0,'特雷西斯（本格，与898年、内战选一开）':!0,赫德雷:!0,讯使:!0,梅菲斯特:!0,霜星:!0,碎骨:!0,'安玛、克雷松':!0,阿丽娜:!0,巫王:!0,'W（本格，与维什戴尔选一开）':!0,'陈（本格，与异格选一开）':!0,'诗怀雅（本格，与异格选一开）':!0,'塔露拉（斗士，与黑蛇选一开）':!0,'阿米娅（本格，与幼年、医疗、炉芯终曲选一开）':!0,'博士（男，以博士身份游玩时请关闭）':!1,鞭刃:!0,忍冬:!0,玛恩纳:!0,'临光（本格，与异格选一开）':!1,瑕光:!0,'苇草（本格，与幼龙、异格选一开）':!1,Mon3tr锚定:!0,'死芒（本格，与幼龙选一开）':!1,'祐天寺若麦（本格，与菲林选一开）':!0,左乐:!0,华法琳:!0,'拉普兰德（本格，与幼狼、异格、无序的谦卑选一开）':!0,'德克萨斯（本格，与幼狼、异格选一开）':!0,可颂:!0,空:!0,'能天使（本格，与幼年、异格选一开）':!0,林:!0,'银灰（本格，与异格选一开）':!1,'望（本格，与早年选一开）':!0,'初雪（本格，与异格选一开）':!1,崖心:!0,锏:!0,灵知:!0,黑:!0,'煌（本格，与异格选一开）':!0,狮蝎:!0,'惊蛰（本格，与异格选一开）':!1,'推进之王（本格，与异格选一开）':!0,'斯卡蒂（本格，与异格选一开）':!0,'塑心（本格，与幼年选一开）':!0,'归溟幽灵鲨（异格，与本格选一开）':!0,艾丽妮:!0,'莫斯提马（本格，与少女选一开）':!0,'蕾缪安（本格，与少女选一开）':!0,'菲亚梅塔（本格，与少女选一开）':!0,迷迭香:!0,'丰川祥子（本格，与萨卡兹选一开）':!0,缪尔赛思:!0,霍尔海雅:!0,伊芙利特:!0,塞雷娅:!0,'赫默（本格，与异格选一开）':!1,多萝西:!0,白面鸮:!0,梅尔:!0,星极:!0,'星源（本格，与异格选一开）':!1,'三角初华（本格，与佩洛选一开）':!0,'若叶睦（本格，与卡特斯选一开）':!0,'八幡海铃（本格，与鲁珀选一开）':!0,锡兰:!0,铃兰:!0,斥罪:!0,红:!0,羽毛笔:!0,暗索:!0,麦哲伦:!0,刻俄柏:!0,'特蕾西娅（本格，与898年、巴别塔、魔王选一开）':!0,伊内丝:!0,科西切:!0,文月:!0,鼠王:!0,角峰:!0,米莎:!0,'爱国者（本格，与博卓卡斯替选一开）':!0,希尔德加德:!0,浮士德:!0,东国:!0,白雪:!0,普瑞赛斯:!0,'博士（女，以博士身份游玩时请关闭）':!0,Mon3tr:!0,可露希尔:!0,Mechanist:!0,ACE:!0,Scout:!0,Sharp:!0,Pith:!0,Stormeye:!0,Touch:!0,Misery:!0,Raidian:!0,Outcast:!0,'年（本格，与早年选一开）':!0,'夕（本格，与早年选一开）':!0,'令（本格，与早年选一开）':!0,'黍（本格，与早年选一开）':!0,'余（本格，与早年选一开）':!0,'重岳（本格，与朔选一开）':!0,仇白:!0,九:!0,Logos:!0,'U-Official':!0,薇薇安娜:!0,歌蕾蒂娅:!0,乌尔比安:!0,'浊心斯卡蒂（异格，与本格选一开）':!1,史尔特尔:!0,耶拉:!0,阿玛雅:!0,卡谢娜:!0,水月:!0,渡魂剑:!0,澄闪:!0,佩佩:!0,'菈玛莲（本格，与898年选一开）':!0,克丽斯腾:!0,可萝尔:!0,阿斯卡纶:!0,源石与源石技艺:!0,感染者与矿石病:!0,'祐天寺若麦（菲林，与本格选一开）':!1,源石技术:!0,深海猎人:!0,兽主:!0,闪灵:!0,夜莺:!0,'三角初华（佩洛，与本格选一开）':!1,格特鲁德:!0,鸿雪:!0,琴柳:!0,'绩（本格，与早年选一开）':!0,巨兽:!0,'丰川祥子（萨卡兹，与本格选一开）':!1,巴别塔:!0,大帝:!0,'百炼嘉维尔（异格，与本格选一开）':!0,森蚺:!0,特米米:!0,妮芙:!0,泥岩:!0,提丰:!0,安洁莉娜:!0,号角:!0,'艾雅法拉（本格，与异格选一开）':!1,行箸:!0,食铁兽:!0,亚叶:!0,寒檀:!0,凛视:!0,罗德岛论坛:!0,桃金娘:!0,子月:!0,阮薇薇:!0,龙泡泡:!0,弑君者:!0,早露:!0,凛冬:!0,烈夏:!0,真理:!0,古米:!0,'{{user}}锚定（以博士身份游玩时请关闭）':!0,蔓德拉:!0,和弦:!0,'若叶睦（卡特斯，与本格选一开）':!1,'罗德岛论坛（美化版，非游玩时请关闭）':!1,白铁:!0,凯瑟琳:!0,因陀罗:!0,摩根:!0,达格达:!0,戴菲恩:!0,'杰西卡（本格，与异格选一开）':!0,雷蛇:!0,芙兰卡:!0,'涤火杰西卡（异格，与本格选一开）':!1,'新约能天使（异格，与幼年、本格选一开）':!1,睚:!0,'塔露拉（黑蛇，与斗士选一开）':!1,'八幡海铃（鲁珀，与本格选一开）':!1,'嘉维尔（本格，与异格选一开）':!1,'幽灵鲨（本格，与异格选一开）':!1,'缄默德克萨斯（异格，与少女、本格选一开）':!1,'荒芜拉普兰德（异格，与幼狼、本格、无序的谦卑选一开）':!1,'维什戴尔（异格，与本格W选一开）':!1,'司霆惊蛰（异格，与本格选一开）':!0,'烛煌（异格，与本格选一开）':!1,歌利亚:!0,恐鱼:!0,海嗣种类:!0,'海嗣灭世（非游玩时请关闭）':!1,'你与她的终末（非游玩时请关闭）':!1,塞壬唱片MSR:!0,皇帝的利刃:!0,'麒麟R夜刀（异格，与本格选一开）':!0,'夜刀（本格，与异格选一开）':!1,杜林:!0,'黑角（本格，与异格选一开）':!1,巡林者:!0,'火龙S黑角（异格，与本格选一开）':!0,'斩业星熊（异格，与本格选一开）':!1,遥:!0,'琳琅诗怀雅（异格，与本格选一开）':!1,'假日威龙陈（异格，与本格选一开）':!1,'罗德岛学院（非游玩时请关闭）':!1,'阿米娅（医疗，与幼年、本格、炉芯终曲选一开）':!1,'纯烬艾雅法拉（异格，与本格选一开）':!0,玫兰莎:!0,宴:!0,格拉尼:!0,绮良:!0,'耀骑士临光（异格，与本格选一开）':!0,老鲤:!0,缠丸:!0,界园:!0,器伥:!0,'焰影苇草（异格，与幼龙、本格选一开）':!1,'爱布拉娜·都柏林（幼龙，与本格选一开）':!0,'拉芙希妮·都柏林（幼龙，与本格、异格选一开）':!0,司岁台:!0,血魔大君:!0,'Miss.Christine':!0,'食腐者之王（本格，与898年选一开）':!0,变形者集群:!0,'易（本格，与早年选一开）':!0,'弗莱蒙特（本格，与898年选一开）':!0,多利:!0,大祭司:!0,'终末地（非游玩时请关闭）':!1,扎罗:!0,'锚定（有点用但不多）':!0,罗素:!0,乔万娜:!0,伊斯:!0,坎诺特:!0,曼弗雷德:!0,埃芒加德:!0,隐德来希:!0,空弦:!0,'维娜·维多利亚（异格，与本格推进之王选一开）':!1,晓歌:!0,卡莱莎:!0,厄尔苏拉:!0,苏苏洛:!0,青枳:!0,流明:!0,'寒芒克洛丝（异格，与本格选一开）':!1,'克洛丝（本格，与异格选一开）':!0,极境:!0,'棘刺（本格，与异格选一开）':!0,'引星棘刺（异格，与本格选一开）':!1,'送葬人（本格，与幼年、异格选一开）':!1,'圣约送葬人（异格，与幼年、本格选一开）':!0,安赛尔:!0,'预见末日的贤人（与Ama-10、凯尔希、巴别塔选一开）':!1,杜宾:!0,极光:!0,'傀影（本格，与酒神选一开）':!1,'酒神（异格，与本格傀影选一开）':!0,'“酒神”':!0,蒂比:!0,薄绿:!0,Mantra:!0,圣愚:!0,'管理员（同终末地条目）':!1,'陈千语（同终末地条目）':!1,'佩丽卡（同终末地条目）':!1,'伊冯（同终末地条目）':!1,'赛希（同终末地条目）':!1,冬时:!0,'颉（整合了现有信息的先行版，非游玩时请关闭）':!1,折桠:!0,塞西莉亚:!0,伊蒂达:!0,槐琥:!0,槐天裴:!0,'阿米娅（幼年，与本格、医疗、炉芯终曲选一开）':!1,'阿米娅·炉芯终曲（与幼年、本格、医疗选一开）':!1,暴行:!0,吽:!0,阿:!0,孑:!0,董阿伯:!0,阿消:!0,天火:!0,砾:!0,深靛:!0,蓝毒:!0,'芬（本格，与异格选一开）':!0,'历阵锐枪芬（异格，与本格选一开）':!1,锡人:!0,'Ama-10（与凯尔希、巴别塔、预见末日的贤人选一开）':!1,'凯尔希（巴别塔，与Ama-10、本格、预见末日的贤人选一开）':!1,希尔达:!0,莫菲丝:!0,'特蕾西娅（898年，与本格、巴别塔、魔王选一开）':!1,'特蕾西娅（巴别塔，与本格、898年、魔王选一开）':!1,'特雷西斯（898年，与本格、内战选一开）':!1,'特雷西斯（内战，与本格、898年选一开）':!1,'蕾缪乐（幼年，与本格、异格选一开）':!1,'阿尔图罗·吉亚洛（幼年，与本格选一开）':!1,'费德里科·吉亚洛（幼年，与本格、异格选一开）':!1,'蕾缪安（少女，与本格选一开）':!1,'莫斯提马（少女，与本格选一开）':!1,奎萨图什塔:!0,萨卢斯:!0,'荒芜拉普兰德（无序的谦卑，与幼狼、本格、异格选一开）':!1,'朔（与本格重岳选一开）':!1,'望（早年，与本格选一开）':!1,'令（早年，与本格选一开）':!1,'黍（早年，与本格选一开）':!1,'绩（早年，与本格选一开）':!1,'易（早年，与本格选一开）':!1,'年（早年，与本格选一开）':!1,'夕（早年，与本格选一开）':!1,'余（早年，与本格选一开）':!1,潘格尼尼:!0,梦城堡:!0,爱丽丝:!0,贝娜:!0,海沫:!0,娜仁图亚:!0,伺夜:!0,信仰搅拌机:!0,Ash:!0,Ela:!0,Lana:!0,'Frost（彩六）':!0,'弗莱蒙特（898年，与本格选一开）':!1,'贝尔莎（非游玩魔王开局请关闭）':!1,'大女妖（非游玩魔王开局时请关闭）':!1,'菈玛莲（898年，与本格选一开）':!1,'食腐者之王（898年，与本格选一开）':!1,'博卓卡斯替（与本格爱国者选一开）':!1,Tachanka:!0,Fuze:!0,Doc:!0,Blitz:!0,玛露西尔:!0,莱欧斯:!0,森西:!0,齐尔查克:!0,罗小黑:!0,'Lancet-2':!0,梓兰:!0,老天师:!0,泡普卡:!0,基建材料:!0,工业材料:!0,太傅:!0,驼兽:!0,'杜林（族）':!0,际崖城:!0,梅兰德基金会:!0,太尉:!0,'菲亚梅塔（少女，与本格选一开）':!1,'切利尼娜·德克萨斯（幼狼，与本格、异格选一开）':!1,'拉普兰德·萨卢佐（幼狼，与本格、异格、无序的谦卑选一开）':!1,阿尔贝托:!0,聆音:!0,'埃莉丝（肉鸽仙人跳之萨科塔修女）':!0,羽兽:!0,瘤兽:!0,沙地兽:!0,裂兽:!0,钳兽:!0,云兽:!0,循兽:!0,鼷兽:!0,锈锤:!0,鲤氏侦探事务所:!0,雷神工业:!0,太阳谷机械工业:!0,泰拉经济体系:!0,泰拉货币体系:!0,塔拉:!0,高卢:!0,'“桥夹”克里夫':!0,玻利瓦尔:!0,米诺斯:!0,雷姆必拓:!0,约翰老妈:!0,塔山生物科技:!0,玫瑰报业联合集团:!0,梁洵:!0,宁辞秋:!0,柳儿:!0,'奎隆·摩诃萨埵权化（佛祖，与本格选一开）':!1,'奎隆（本格，与佛祖选一开）':!0,战力分级标准:!0,阿纳萨:!0,雅拉:!0,梅厄斯:!0,逐魇骑士:!0,血骑士:!0,'凛御银灰（异格，与本格选一开）':!0,'圣聆初雪（异格，与本格选一开）':!0,'溯光星源（异格，与本格选一开）':!0,焰尾:!0,远牙:!0,灰毫:!0,野鬃:!0,温蒂:!0,嵯峨:!0,帕拉斯:!0,卡涅利安:!0,蜜蜡:!0,异客:!0,山:!0,赫拉格:!0,娜斯提:!0,黑键:!0,止颂:!0,鬼:!0,瑰盐:!0,空构:!0,桑葚:!0,安多恩:!0,'洁尔佩塔（同终末地条目）':!1,'艾尔黛拉（同终末地条目）':!1,'昼雪（同终末地条目）':!1,'骏卫（同终末地条目）':!1,'余烬（同终末地条目）':!1,'（UI插件）返回键':!1,'（UI插件）开场美化':!1,'（上下文优化插件）EJS部分(注意设置扫描深度 = 0)':!1,'（插件通用）[InitVar]':!1,絮雨:!0,九色鹿:!0,'构史成真了喵（非游玩时请关闭喵）':!1,红豆:!0,深池:!0,'“校官”':!0,'“禁军小教头”':!0,安纳斯塔西奥:!0,峯驰物流:!0,日落即逝:!0,海蒂:!0,调香师:!0,火神:!0,豆苗:!0,'淬羽赫默（异格，与本格选一开）':!0,香草:!0,太古集团:!0,拜松:!0,欧厄尔:!0,贾维:!0,布洛卡:!0,奥斯塔:!0,'“正义骑士号”':!0,水灯心:!0,'芙蓉（本格，与异格选一开）':!0,'濯尘芙蓉（异格，与本格选一开）':!1,白垩:!0,'炎熔（本格，与异格选一开）':!0,'炎狱炎熔（异格，与本格选一开）':!1,米格鲁:!0,珀茜瓦尔:!0,莉泽洛特:!0,雷德:!0,梅希亚:!0,天空盒:!0,澪:!0,三船光平:!0,斐尔迪南:!0,小贾斯汀:!0,杰斯顿:!0,莫妮克:!0,罗伊:!0,炎客:!0,芳汀:!0,巫恋:!0,卡夫卡:!0,杏仁:!0,四月:!0,'“灰礼帽”':!0,灰喉:!0,空爆:!0,月见夜:!0,斑点:!0,贝林厄姆:!0,Aya:!0,Alty:!0,Dan:!0,'Frost（日落即逝）':!0,伊万杰利斯塔十一世:!0},c=['W（本格，与维什戴尔选一开）','陈（本格，与异格选一开）','空','林','望（本格，与早年选一开）','锏','黑','煌（本格，与异格选一开）','若叶睦（本格，与卡特斯选一开）','红','鼠王','年（本格，与早年选一开）','夕（本格，与早年选一开）','令（本格，与早年选一开）','黍（本格，与早年选一开）','余（本格，与早年选一开）','重岳（本格，与朔选一开）','九','绩（本格，与早年选一开）','若叶睦（卡特斯，与本格选一开）','睚','烛煌（异格，与本格选一开）','遥','假日威龙陈（异格，与本格选一开）','宴','易（本格，与早年选一开）','颉（整合了现有信息的先行版，非游玩时请关闭）','吽','阿','孑','砾','芬（本格，与异格选一开）','历阵锐枪芬（异格，与本格选一开）','朔（与本格重岳选一开）','望（早年，与本格选一开）','令（早年，与本格选一开）','黍（早年，与本格选一开）','绩（早年，与本格选一开）','易（早年，与本格选一开）','年（早年，与本格选一开）','夕（早年，与本格选一开）','余（早年，与本格选一开）','山','澪'];async function A(){try{const n=await getCharWorldbookNames('current');if(n.primary)return n.primary;if(n.additional&&n.additional.length>0)return n.additional[0];throw new Error('未找到当前角色绑定的世界书')}catch(n){throw console.error('[ARK_Manager] Failed to get target worldbook:',n),n}}const p={async getWorldbookStatus(){try{const n=await A(),e=await getWorldbook(n);let t=!0,a=!0;for(const n of Object.keys(d)){const o=e.find(e=>e.name===n);if(!o)continue;const r=d[n],i=o.enabled;i!==r&&(t=!1);c.includes(n)?!1!==i&&(a=!1):i!==r&&(a=!1)}return t?'original':a?'single_char_closed':'modified'}catch(n){return console.error('[ARK_Manager] Get Status failed:',n),'modified'}},async resetToBaseline(){console.info('[ARK_Manager] Resetting Worldbook to Baseline...');try{const n=await A();await updateWorldbookWith(n,n=>(n.forEach(n=>{n.name&&d.hasOwnProperty(n.name)&&(n.enabled=d[n.name])}),n)),toastr.success('世界书已重置为初始状态')}catch(n){console.error('[ARK_Manager] Reset failed:',n),toastr.error('世界书重置失败: '+n.message)}},async applyScenario(n,e=!1){if(!e){if('modified'===await this.getWorldbookStatus())throw new Error('STATUS_MODIFIED')}const t=l.find(e=>e.swipeId===n);if(t){console.info(`[ARK_Manager] Applying Scenario: ${t.title}`),toastr.info(`正在应用开局设置: ${t.title}...`);try{const n=await A();await updateWorldbookWith(n,n=>(n.forEach(n=>{const e=n.name;e&&(t.linkedWorldInfo.includes(e)&&(n.enabled=!0),t.disabledWorldInfo&&t.disabledWorldInfo.includes(e)&&(n.enabled=!1))}),n)),toastr.success('开局设置应用成功'),console.info('[ARK_Manager] Scenario applied successfully.')}catch(n){throw console.error('[ARK_Manager] Apply Scenario failed:',n),toastr.error('应用开局失败: '+n.message),n}}else console.error(`[ARK_Manager] Scenario #${n} not found.`)},async closeSingleCharEntries(){console.info('[ARK_Manager] Closing all single-character entries...');try{const n=await A();await updateWorldbookWith(n,n=>(n.forEach(n=>{n.name&&c.includes(n.name)&&(n.enabled=!1)}),n)),toastr.success('已关闭所有单字条目')}catch(n){console.error('[ARK_Manager] Bulk close failed:',n),toastr.error('操作失败: '+n.message)}}},C={class:'main-container'},g={class:'content-wrapper'},f={class:'header-section'},u={class:'arknights-logo-container'},b=['src'],v={class:'opening-section'},m={class:'opening-grid'},h=['onClick'],B={class:'opening-title'},w={key:0,class:'opening-info'},x={key:1,class:'opening-info'},k={class:'status-value'},y={class:'theme-buttons-container'},S='ark_statusbar_theme',E=(0,a.defineComponent)({__name:'StartupNavigator',setup(n){const e=(0,a.ref)(l),t=(0,a.ref)('dark'),o=(0,a.ref)(!1),r=(0,a.ref)('original'),i=(0,a.computed)(()=>{switch(r.value){case'original':return'初始状态';case'single_char_closed':return'单字屏蔽';case'modified':return'非标修改';default:return'未知状态'}}),d=(0,a.computed)(()=>{switch(r.value){case'original':return'status-green';case'single_char_closed':return'status-blue';case'modified':return'status-orange';default:return'status-gray'}}),c=()=>{o.value=!o.value,o.value&&E()},A=n=>{t.value=n,localStorage.setItem(S,n)},E=async()=>{r.value=await p.getWorldbookStatus()},I=async()=>{await p.closeSingleCharEntries(),await E()},W=async()=>{confirm('确定要将世界书重置为初始状态吗？这将丢失所有自定义修改。')&&(await p.resetToBaseline(),await E())};(0,a.onMounted)(()=>{const n=localStorage.getItem(S);'light'!==n&&'dark'!==n||(t.value=n),E()});return(n,r)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{class:(0,a.normalizeClass)(['ark-startup-container',{'dark-theme':'dark'===t.value}])},[(0,a.createElementVNode)('div',C,[(0,a.createElementVNode)('div',g,[(0,a.createCommentVNode)(' Header Section '),(0,a.createElementVNode)('div',f,[(0,a.createElementVNode)('div',u,[(0,a.createElementVNode)('img',{src:(0,a.unref)(s).LOGO_URL,alt:'Arknights Logo',class:'arknights-logo'},null,8,b)]),r[3]||(r[3]=(0,a.createElementVNode)('p',{class:'author-info'},'初版作者：打不准的豌豆射手 | v版作者：F.o.x.i.o',-1)),r[4]||(r[4]=(0,a.createElementVNode)('p',{class:'author-info'},'UI重构：ARK_STATUSBAR Project',-1))]),r[7]||(r[7]=(0,a.createStaticVNode)('<div class="copyright-notice" data-v-13ae4df6><strong data-v-13ae4df6>版权声明</strong><br data-v-13ae4df6> 本卡完全免费，永远禁止商业化行为，如果您是购买获得，请立即退款并向购买平台举报贩卖者，维护创作者和您自身的权益。 </div><div class="usage-instructions" data-v-13ae4df6><strong data-v-13ae4df6>使用说明</strong><br data-v-13ae4df6> 请第一次使用本角色卡的用户，务必前往最后一个开局阅读<strong style="color:var(--warning-accent);" data-v-13ae4df6>“狐の言（在首次游玩前请一定要看！）”</strong>。<br data-v-13ae4df6> 若需管理单字干员或重置世界书状态，请点击右下角按钮打开侧边栏进行操作。 </div><div class="section-title" data-v-13ae4df6>◆ 简介</div><p class="intro-desc" data-v-13ae4df6> 从先史文明的终焉开始，到萨卡兹的第一位魔王，再到移动城市的拔地而起……<br data-v-13ae4df6> 如今的泰拉已经历经许多，源石将诅咒与馈赠印刻于这片大地，列国的城邦永无止境地在天灾轨迹中迁徙，感染者的悲鸣与帝国的号角于风雪中交织，仇恨浸染大地，而希望亦如天光。<br data-v-13ae4df6> 现在，你来到于此。<br data-v-13ae4df6> 你将作何抉择？你将行向何方？<br data-v-13ae4df6> 你是……谁？ </p>',4)),(0,a.createCommentVNode)(' Scenarios Grid '),r[8]||(r[8]=(0,a.createElementVNode)('div',{class:'section-title'},'◆ 点击—开启故事',-1)),(0,a.createElementVNode)('div',v,[(0,a.createElementVNode)('div',m,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.value,n=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:n.swipeId,class:'opening-card',onClick:e=>(async n=>{try{try{await p.applyScenario(n.swipeId)}catch(e){if('STATUS_MODIFIED'!==e.message)throw e;if(!confirm('检测到世界书包含非标准修改（可能是您手动开启了某些条目）。\n直接跳转开局可能会在当前基础上叠加设置，导致状态混乱。\n\n是否继续？'))return;await p.applyScenario(n.swipeId,!0)}if(await E(),'undefined'==typeof SillyTavern||!SillyTavern.chat)throw new Error('SillyTavern environment not found.');const e=SillyTavern.chat[0];if(!e||!e.swipes||'string'!=typeof e.swipes[n.swipeId])throw new Error(`Swipe #${n.swipeId} content not found.`);console.info(`[Startup] Switching to Swipe #${n.swipeId}`),e.swipe_id=n.swipeId,e.mes=e.swipes[n.swipeId],await SillyTavern.saveChat(),await SillyTavern.reloadCurrentChat()}catch(n){console.error('[Startup] Failed to apply scenario:',n),toastr.error('切换开局失败: '+n.message)}})(n)},[(0,a.createElementVNode)('div',B,(0,a.toDisplayString)(n.title),1),(0,a.createCommentVNode)(' Decorational Info '),n.linkedWorldInfo&&n.linkedWorldInfo.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',w,[r[5]||(r[5]=(0,a.createElementVNode)('span',{class:'info-label'},'开启:',-1)),(0,a.createTextVNode)(' '+(0,a.toDisplayString)(n.linkedWorldInfo.slice(0,3).join(', '))+(0,a.toDisplayString)(n.linkedWorldInfo.length>3?'...':''),1)])):(0,a.createCommentVNode)('v-if',!0),n.disabledWorldInfo&&n.disabledWorldInfo.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',x,[r[6]||(r[6]=(0,a.createElementVNode)('span',{class:'info-label'},'关闭:',-1)),(0,a.createTextVNode)(' '+(0,a.toDisplayString)(n.disabledWorldInfo.slice(0,3).join(', '))+(0,a.toDisplayString)(n.disabledWorldInfo.length>3?'...':''),1)])):(0,a.createCommentVNode)('v-if',!0)],8,h))),128))])])]),(0,a.createCommentVNode)(' Settings Toggle '),(0,a.createElementVNode)('div',{class:(0,a.normalizeClass)(['settings-tab',{'is-open':o.value}]),onClick:c},[...r[9]||(r[9]=[(0,a.createElementVNode)('svg',{xmlns:'http://www.w3.org/2000/svg',height:'24px',viewBox:'0 0 24 24',width:'24px',fill:'currentColor'},[(0,a.createElementVNode)('path',{d:'M0 0h24v24H0V0z',fill:'none'}),(0,a.createElementVNode)('path',{d:'M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12-.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z'})],-1)])],2),(0,a.createCommentVNode)(' Settings Overlay (Mobile Backdrop) '),o.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:0,class:'settings-overlay',onClick:r[0]||(r[0]=n=>o.value=!1)})):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' Settings Panel '),(0,a.createElementVNode)('div',{class:(0,a.normalizeClass)(['settings-panel',{'is-open':o.value}])},[r[16]||(r[16]=(0,a.createElementVNode)('h3',null,'世界书控制',-1)),(0,a.createElementVNode)('div',{class:(0,a.normalizeClass)(['wb-status-display',(0,a.unref)(d)])},[r[10]||(r[10]=(0,a.createElementVNode)('div',{class:'status-label'},'SYSTEM STATUS',-1)),(0,a.createElementVNode)('div',k,(0,a.toDisplayString)((0,a.unref)(i)),1),r[11]||(r[11]=(0,a.createElementVNode)('div',{class:'status-decor'},null,-1))],2),(0,a.createElementVNode)('div',{class:'wb-actions'},[(0,a.createElementVNode)('div',{class:'ark-btn warning',onClick:I},[...r[12]||(r[12]=[(0,a.createElementVNode)('div',{class:'btn-content'},[(0,a.createElementVNode)('span',{class:'btn-icon'},'⚡'),(0,a.createElementVNode)('span',{class:'btn-text'},'屏蔽单字干员')],-1),(0,a.createElementVNode)('div',{class:'btn-decor'},null,-1)])]),(0,a.createElementVNode)('div',{class:'ark-btn danger',onClick:W},[...r[13]||(r[13]=[(0,a.createElementVNode)('div',{class:'btn-content'},[(0,a.createElementVNode)('span',{class:'btn-icon'},'↺'),(0,a.createElementVNode)('span',{class:'btn-text'},'还原世界书')],-1),(0,a.createElementVNode)('div',{class:'btn-decor'},null,-1)])])]),r[17]||(r[17]=(0,a.createStaticVNode)('<div id="wb-control-hint" class="warning-box" data-v-13ae4df6><strong style="color:orange;" data-v-13ae4df6>[!] 世界书管理提示</strong><p style="font-size:0.85em;margin-top:5px;line-height:1.6;" data-v-13ae4df6> 本面板会智能识别并管理当前角色的世界书状态。 </p><p style="font-size:0.85em;margin-top:5px;line-height:1.6;" data-v-13ae4df6> 若您手动修改了世界书（如自行开启了某些条目），状态将显示为<strong style="color:#ff9800;" data-v-13ae4df6>“已修改”</strong>。此时切换开局可能会触发冲突警告，请按需选择继续或重置。 </p></div><div class="settings-divider" data-v-13ae4df6></div><h3 data-v-13ae4df6>页面主题</h3>',3)),(0,a.createElementVNode)('div',y,[(0,a.createElementVNode)('div',{class:(0,a.normalizeClass)(['theme-button light',{active:'light'===t.value}]),onClick:r[1]||(r[1]=n=>A('light'))},[...r[14]||(r[14]=[(0,a.createElementVNode)('span',null,'默认',-1)])],2),(0,a.createElementVNode)('div',{class:(0,a.normalizeClass)(['theme-button dark',{active:'dark'===t.value}]),onClick:r[2]||(r[2]=n=>A('dark'))},[...r[15]||(r[15]=[(0,a.createElementVNode)('span',null,'夜间',-1)])],2)])],2)])],2))}});t(531);const I=(0,r.A)(E,[['__scopeId','data-v-13ae4df6']]),W='ark-startup-mount-point',T='ark-return-btn-mount-point';$(()=>{console.info('[ARK_STATUSBAR] Module Loaded. Starting mount loop...'),function(){if($(`head > div[script_id="${getScriptId()}"]`).length>0)return;const n=$('<div>').attr('script_id',getScriptId()).append($('head > style',document).clone());$('head').append(n)}(),setInterval(()=>{try{if('undefined'==typeof SillyTavern||!SillyTavern.chat)return;const n=$('#chat > .mes[mesid="0"]');if(0===n.length)return;if('true'===n.attr('is_user'))return;const e=n.find('.mes_text');if(0===e.length)return;if(0===(SillyTavern.chat[0].swipe_id||0)){if(e.find(`.${T}`).length>0&&e.find(`.${T}`).remove(),0===e.find(`.${W}`).length){console.info('[ARK_STATUSBAR] Mounting Startup Navigator...'),e.empty();const n=document.createElement('div');n.className=W,e.append(n),(0,a.createApp)(I).mount(n)}}else if(e.find(`.${W}`).length>0&&e.find(`.${W}`).remove(),0===e.find(`.${T}`).length){console.info('[ARK_STATUSBAR] Mounting Return Button...');const n=document.createElement('div');n.className=T,e.append(n),(0,a.createApp)(i).mount(n)}}catch(n){console.error('[ARK_STATUSBAR] Mounting loop error:',n)}},500)}),$(window).on('pagehide',()=>{$(`head > div[script_id="${getScriptId()}"]`).remove()});
//# sourceMappingURL=index.js.map