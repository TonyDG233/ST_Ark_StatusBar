# Phase 1.7: 移动端适配优化 (Mobile Optimization)

## 1. 问题分析 (Problem Analysis)
**核心问题**: 在移动设备（窄屏，如 360px-390px）上，UI 表现严重异常，完全不可用。

### 具体表现:
1.  **侧边栏占满全屏**: 设置侧边栏展开后，几乎占据整个屏幕宽度，导致左侧的“收起”按钮被挤出屏幕或无法点击。
    - **原因**: 默认 `300px` 宽度 + `50px` 按钮宽度 = `350px`，直接撑爆了窄屏手机的视口。`max-width: 85vw` 在这种极限宽度下失效（因为 85vw 约等于 300px）。
2.  **交互死角**: 侧边栏展开后，屏幕剩余空间不足，用户无法通过点击“外部区域”来关闭侧边栏。
3.  **主界面内容溢出**: 剧情选择卡片（Scenario Cards）和标题在移动端出现横向溢出，部分按钮或文字伸出 UI 边界。

## 2. 解决方案 (Solution Strategy)

### A. 侧边栏：极度瘦身与同步 (Sidebar Fix)
彻底放弃 `max-width` 的软限制，改用极度压缩的固定宽度。
- **强制宽度**: 在移动端使用固定宽度 **`210px`**。
    - **效果**: 在主流 360px 宽度的设备上，留出 `150px` 的空间（50px 按钮 + 100px 遮罩可视区）。这彻底解决了误触问题，提供了宽裕的点击关闭区域。
- **内容适配**:
    - 将侧边栏内边距从 `20px` 减少到 `12px`。
    - 缩小字体大小 (0.8em - 1.0em) 以适应窄布局，确保按钮文字不换行、不溢出。
- **位置同步**: 使用 CSS 变量 `--panel-width` 绑定侧边栏宽度和按钮位置。
    - 侧边栏宽度 = `var(--panel-width)`
    - 按钮 `right` 值 = `var(--panel-width)`
    - 确保无论宽度如何计算，按钮永远紧贴侧边栏边缘。

### B. 交互：局部遮罩 (Local Overlay)
为了解决“无法点击关闭”的问题，且不影响非侧边栏区域的体验。
- **方案**: 引入 `.settings-overlay`。
- **表现**: 仅在侧边栏打开时显示一个半透明黑色遮罩层，覆盖在主内容之上（Z-Index 位于侧边栏之下）。
- **作用**: 点击遮罩层即可关闭侧边栏，提供超大点击区域，解决误触和难以关闭的问题。

### C. 主界面：内容防溢出 (Content Overflow Fix)
解决剧情卡片和按钮伸出屏幕的问题。
- **方案**:
    - **响应式 Padding**: 在移动端 (`max-width: 768px`) 将容器的 Padding 从 PC 端的较大值缩小为 `15px`。
    - **宽度限制**: 确保 `.scenario-card` 和按钮容器具有 `max-width: 100%` 和 `box-sizing: border-box`。
    - **Logo适配**: 限制 Logo 宽度为 `80%`，防止撑开容器。

## 3. 实施结果 (Results)
- **状态**: 已完成 (Completed)
- **验证**:
    - 侧边栏在 360px 屏幕上显示正常，且留有足够遮罩点击区域。
    - 按钮文字清晰，无溢出。
    - 主界面无横向滚动条，内容排版整齐。